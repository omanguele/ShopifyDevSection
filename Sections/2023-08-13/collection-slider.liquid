{% assign min = 1 %}
{% assign max = 99999999 %}
{% assign diff = max | minus: min %}
{% assign randomNumber = 'now' | date: '%N' | modulo: diff | plus: min %}

<style>
  #collectionsliderbxb12328{{ randomNumber }}  {
      width: 100%;
      position: relative;
      background-color: {{ section.settings.bg_color }};
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_container {
      width: 100%;
      padding: {{ section.settings.mobile_top_spacing }}px {{ section.settings.mobile_left_spacing }}px {{ section.settings.mobile_bottom_spacing }}px {{ section.settings.mobile_right_spacing }}px;
      margin-right: auto;
      margin-left: auto;
      position: relative;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_title {
      margin-bottom: 24px !important;
      color: {{ section.settings.heading_color }};
      letter-spacing: 0.2px;
      font-size: 22px;
      line-height: 30px;
      padding: 0;
      font-weight: 600;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_slider {
      width: 100%;
      position: relative;
      will-change: transform;
  }
  #shopify-section-{{ section.id }}   .swiper {
      width: 100%;
      height: 100%;
      padding-bottom: 30px !important;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_slide {
      width: 100%;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_slide a{
      display: block;
      width: 100%;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_prdt_thumb {
      margin-bottom: 8px;
      position: relative;
      width: 100%;
  }
  #shopify-section-{{ section.id }}    .collectionsliderbxb12328_percentage {
      font-weight: 600;
      letter-spacing: .2px;
      z-index: 10;
      position: absolute;
      top: 0;
      left: 0;
      text-transform: uppercase;
      display: inline-block;
      font-size: 12px;
      line-height: 18px;
      margin-right: 4px;
      margin-bottom: 4px;
      background-color: {{ section.settings.hl_color }};
      color: #fff;
      padding: 2px 8px;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_image {
      position: relative;
      width: 100%;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_image img {
      height: 152px;
      width: auto;
      object-fit: contain;
      margin: 0 auto;
      display: block;
      max-width: 100%;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_slide_info {
      width: 100%;
  }
  #shopify-section-{{ section.id }}    .collectionsliderbxb12328_prdt_title {
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      font-weight: 600;
      font-size: 14px;
      line-height: 22px;
      color: {{ section.settings.heading_color }};
      letter-spacing: 0.1px;
      margin-bottom: 4px;
      text-decoration: none;
      height: 44px;
      text-decoration: none;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_prdt_rating {
      display: flex;
      margin-bottom: 4px;
      line-height: 20px;
      font-size: 12px;
      color: #333;
      align-items: center;
      justify-content: flex-start;
      gap: 4px;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_prdt_rating svg {
      height: 15px;
      width: 15px;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_prdt_price {
      margin-bottom: 4px;
      display: flex;
      flex-wrap: wrap;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_price_old {
      font-weight: 400;
      color: #808080;
      text-decoration: line-through;
      margin-right: 8px;
      font-size: 14px;
      line-height: 22px;
      display: inline-block;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_price_new {
      font-weight: 600;
      display: inline-block;
      font-size: 14px;
      line-height: 22px;
      color: {{ section.settings.hl_color }};
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_slide_countdown {
      width: 100%;
      position: relative;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_slide_countdown_title {
      padding: 1px 4px;
      margin-bottom: 4px;
      height: 22px;
      line-height: 18px;
      font-size: 12px;
      background-color: transparent;
      font-weight: 600;
      margin-right: 4px;
      display: inline-block;
      color: {{ section.settings.hl_color }};
      border: 1px solid {{ section.settings.hl_color }};
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_slide_countdown_container {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      font-size: 12px;
      padding-bottom: 4px;
      color: {{ section.settings.hl_color }};
      font-weight: 600;
      display: block;
      text-transform: lowercase;
      font-style: normal;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_slide_countdown_container svg {
      height: 10px;
      width: 10px;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_prdt_instock {
      font-size: 12px;
      line-height: 20px;
      margin-bottom: 4px;
      font-weight: 600;
      min-height: 20px;
  }
  #shopify-section-{{ section.id }}   .collectionsliderbxb12328_scrollbar {
      width: 100%;
  }
  #shopify-section-{{ section.id }}   .swiper-scrollbar-drag {
      background-color: {{ section.settings.scrollbar_color }} !important;
  }
  #shopify-section-{{ section.id }}   .swiper-button-next,
  #shopify-section-{{ section.id }}   .swiper-button-prev {
      background-color: {{ section.settings.btn_bg_color }} !important;
      width: 46px !important;
      max-width: 46px !important;
      border-radius: 50%;
      border: 1px solid {{ section.settings.btn_border_color }};
  }
  #shopify-section-{{ section.id }}    .swiper-button-next::after,
  #shopify-section-{{ section.id }}    .swiper-button-prev::after {
      font-size: 15px !important;
      color: {{ section.settings.btn_ico_color }} !important;
  }

  @media (min-width: 768px) {
      #shopify-section-{{ section.id }}   .collectionsliderbxb12328_container {
          max-width: {% if section.settings.full_with %} 100% {% else %} {{ section.settings.max_width }}px {% endif %};
          padding: {{ section.settings.desktop_top_spacing }}px {{ section.settings.desktop_left_spacing }}px {{ section.settings.desktop_bottom_spacing }}px {{ section.settings.desktop_right_spacing }}px;
      }
      }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">

<section id="collectionsliderbxb12328{{ randomNumber }}">
  <div class="collectionsliderbxb12328_container">
    <div class="collectionsliderbxb12328_title">{{ section.settings.heading }}</div>
    <div class="collectionsliderbxb12328_slider">
      <div class="swiper collectionsliderbxb12328-swiper">
        <div class="swiper-wrapper">
          {% for product in section.settings.collection.products %}
            <div class="swiper-slide">
              <div class="collectionsliderbxb12328_slide">
                <a href="">
                  <div class="collectionsliderbxb12328_prdt_thumb">
                    <div class="collectionsliderbxb12328_percentage">57%</div>
                    <div class="collectionsliderbxb12328_image">
                      <img src="{{ product.featured_image | product_img_url: "master" }}" alt="">
                    </div>
                  </div>
                </a>
                <div class="collectionsliderbxb12328_slide_info">
                  <a href="" class="collectionsliderbxb12328_prdt_title">{{ product.title | escape }}</a>
                  <div class="collectionsliderbxb12328_prdt_rating">
                    <span>
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                        <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" />
                      </svg>
                    </span>
                    <span>(100)</span>
                  </div>
                  <div class="collectionsliderbxb12328_prdt_price">
                    <span class="collectionsliderbxb12328_price_old">{{ product.price_max | money }}</span>
                    <span class="collectionsliderbxb12328_price_new">{{ product.price_min | money }}</span>
                  </div>
                  <div class="collectionsliderbxb12328_slide_countdown">
                    <div class="collectionsliderbxb12328_slide_countdown_title">
                      {{ section.settings.countdown_title }}
                    </div>
                    <div class="collectionsliderbxb12328_slide_countdown_container">
                      <span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                          <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z" clip-rule="evenodd" />
                        </svg>
                      </span>
                      <span>Plus que</span>
                      <span class="collectionsliderbxb12328_countdow_day">0j</span>
                      <span class="collectionsliderbxb12328_countdow_hours">00h</span>
                      <span class="collectionsliderbxb12328_countdow_minutes">00m</span>
                      <span class="collectionsliderbxb12328_countdow_seconds">00s</span>
                    </div>
                  </div>
                  <div class="collectionsliderbxb12328_prdt_instock">
                    {% if product.available %}
                      <span style="color:#009966">En stock</span>
                    {% else %}
                      <span style="color:#E50B39">Rupture de stock</span>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        <div class="collectionsliderbxb12328_scrollbar">
          <div class="swiper-scrollbar"></div>
        </div>
      </div>
    </div>
  </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
<script>
  
  
  
  
        new Swiper(`#shopify-section-{{ section.id }} #collectionsliderbxb12328{{ randomNumber }} .collectionsliderbxb12328-swiper`, {
            freeMode: true,
            navigation: {
                nextEl: "#shopify-section-{{ section.id }} #collectionsliderbxb12328{{ randomNumber }} .swiper-button-next",
                prevEl: "#shopify-section-{{ section.id }} #collectionsliderbxb12328{{ randomNumber }} .swiper-button-prev",
            },
            scrollbar: {
                el: '#shopify-section-{{ section.id }} #collectionsliderbxb12328{{ randomNumber }} .swiper-scrollbar',
            },
            breakpoints: {
                320: {
                    slidesPerView: 2.2,
                    spaceBetween: 10
                },
                840: {
                    slidesPerView: 3.2,
                    spaceBetween: 10
                },
                1024: {
                    slidesPerView: 4,
                    spaceBetween: 16
                }
            }
        });

        var countDownDate{{ randomNumber }} = new Date("{{ section.settings.countdown }}").getTime();

        var x{{ randomNumber }} = setInterval(function() {

            var now = new Date().getTime();

            var distance = countDownDate{{ randomNumber }} - now;

            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            Array.from(document.querySelectorAll('#shopify-section-{{ section.id }} #collectionsliderbxb12328{{ randomNumber }} .collectionsliderbxb12328_slide_countdown_container'))
            .map(function(el) {
                el.querySelector('.collectionsliderbxb12328_countdow_day').innerHTML = days + "j " ;
                el.querySelector('.collectionsliderbxb12328_countdow_hours').innerHTML = hours > 9 ? `${hours}h ` : `0${hours}h `;
                el.querySelector('.collectionsliderbxb12328_countdow_minutes').innerHTML = minutes > 9 ? `${minutes}m ` : `0${minutes}m `; 
                el.querySelector('.collectionsliderbxb12328_countdow_seconds').innerHTML = seconds > 9 ? `${seconds}s` : `0${seconds}s `;
            });


            if (distance < 0) {
                clearInterval(x{{ randomNumber }});
            }
        }, 1000);




</script>

{% schema %}
{
  "name": "Collection Slider",
  "settings": [
    {
      "type":"color",
      "id":"bg_color",
      "label":"Couleur fond",
      "default":"#fff"
    },
    {
      "type":"color",
      "id":"heading_color",
      "label":"Couleur titre",
      "default":"#000"
    },
    {
      "type":"color",
      "id":"hl_color",
      "label":"Couleur hl",
      "default":"#E50B39"
    },
    {
      "type":"color",
      "id":"scrollbar_color",
      "label":"Couleur scrollbar",
      "default":"#E50B39"
    },
    {
      "type":"color",
      "id":"btn_bg_color",
      "label":"Couleur bg bouton",
      "default":"#fff"
    },
    {
      "type":"color",
      "id":"btn_border_color",
      "label":"Couleur border btn",
      "default":"#f2f2f2"
    },
    {
      "type":"color",
      "id":"btn_ico_color",
      "label":"Couleur icon btn",
      "default":"#f2f2f2"
    },
    {
      "type":"text",
      "id":"heading",
      "label":"Titre",
      "default":"Decouvrez nos categories"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type":"text",
      "id":"countdown_title",
      "label":"Titre Countdown",
      "default":"Deal de la semaine"
    },
    {
      "type":"text",
      "id":"countdown",
      "label":"Countdown",
      "default":"Jan 5, 2024 15:37:25"
    },
    {
      "type": "range",
      "id": "desktop_top_spacing",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Desktop Top Spacing",
      "default": 40
    },
    {
      "type": "range",
      "id": "desktop_bottom_spacing",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Desktop Bottom Spacing",
      "default": 40
    },
    {
      "type": "range",
      "id": "desktop_left_spacing",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Desktop Left Spacing",
      "default": 40
    },
    {
      "type": "range",
      "id": "desktop_right_spacing",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Desktop Right Spacing",
      "default": 40
    },
    {
      "type": "range",
      "id": "mobile_top_spacing",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Mobile Top Spacing",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_bottom_spacing",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Mobile Bottom Spacing",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_left_spacing",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Mobile Left Spacing",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_right_spacing",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Mobile Right Spacing",
      "default": 20
    },
    {
      "type": "checkbox",
      "id": "full_with",
      "label": "Full Width",
      "default": false
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 500,
      "max": 2000,
      "step": 100,
      "unit": "px",
      "label": "Max Width",
      "default": 1400
    }
  ],
"presets": [
  {
    "name": "Collection Slider"
  }
]
}
{% endschema %}
