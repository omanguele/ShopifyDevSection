<style>
  #shopify-section-{{ section.id }} #textnumber83901132 {
      padding: 56px 48px;
      background-color: {{ section.settings.bg_color }};
      width: 100%;
      position: relative;
  }
  #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_container {
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      flex-direction: column;
  }
  #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_percentage {
      line-height: 1;
      font-weight: 500;
      font-size: calc(min(15vw, 1520px * 0.15) / 1 * 1);
      overflow-wrap: anywhere;
      letter-spacing: -0.01em;
      margin-bottom: 30px;
  }
  #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_percentage_in {
      background-image: {{ section.settings.number_color }};
      color: #0000;
      background-clip: text;
      box-decoration-break: clone;
  }
  #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_desc {
      max-width: 750px;
      margin: 0 auto;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
  }
  #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_desc_title {
      font-size: 22px;
      font-weight: 500;
      line-height: 1.3;
      color: {{ section.settings.text_color }};
  }
  #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_desc_description {
      margin-top: 20px;
      line-height: 24px;
      color: {{ section.settings.text_color }};
  }

  #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_desc_btn {
      margin-top: 32px;
      font-weight: 700;
      line-height: 1.6;
      text-align: center;
      appearance: none;
      border-radius: 24px;
      transition: background-color .15s ease-in-out,color .15s ease-in-out,box-shadow .15s ease-in-out;
      display: inline-block;
      position: relative;
      padding: 18px 40px;
      background-color: {{ section.settings.btn_bg_color }};
      color: {{ section.settings.btn_text_color }};
      text-decoration: none;
  }

  @media only screen and (max-width: 780px) {
      #shopify-section-{{ section.id }} #textnumber83901132 {
          padding: 32px 20px;
      }
      #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_desc_title {
          font-size: 18px;
      }
      #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_percentage {
          margin-bottom: 13px;
      }
      #shopify-section-{{ section.id }} #textnumber83901132  .textnumber83901132_desc_btn {
          margin-top: 24px;
          padding: 16px 32px;
      }
  }
</style>

<section id="textnumber83901132">
  <div class="textnumber83901132_container">
    <h2 class="textnumber83901132_percentage">
      <span class="textnumber83901132_percentage_in"> <span id="textnumber83901132_percentage_number">0</span>% </span>
    </h2>
    <div class="textnumber83901132_desc">
      <h3 class="textnumber83901132_desc_title">{{ section.settings.title }}</h3>
      <div class="textnumber83901132_desc_description">
        {{ section.settings.description }}
      </div>
      <a href="{{ section.settings.url_btn }}" class="textnumber83901132_desc_btn">{{ section.settings.text_btn }}</a>
    </div>
  </div>
</section>

<script>
   let box = document.querySelector('#shopify-section-{{ section.id }} #textnumber83901132');
   const PERCENTAGE = {{ section.settings.percentage }};
   let options = {
     rootMargin: '0px',
     threshold: 0.5
   };

   let observer = new IntersectionObserver(function(entries) {
     entries.forEach(function(entry) {
       if (entry.isIntersecting) {
           increment();
         observer.unobserve(entry.target);
       }
     });
   }, options);

  observer.observe(box);

   function increment() {
       const percentage = document.querySelector('#shopify-section-{{ section.id }} #textnumber83901132 #textnumber83901132_percentage_number');
       let initValue = 0;
       let incrementIntval = setInterval(() => {
           percentage.innerHTML = initValue;
           if (initValue >= PERCENTAGE) clearInterval(incrementIntval);
           initValue++;
       }, 50)

   }
</script>

{% schema %}
{
  "name": "Text Number",
  "settings": [
  {
    "type": "color",
    "id": "bg_color",
    "label": "Couleur de fond de la section",
    "default": "#fff"
  },
  {
    "type": "color_background",
    "id": "number_color",
    "label": "Couleur du nombre",
    "default": "linear-gradient(3deg, rgba(48, 90, 99, 1) 3%, rgba(112, 85, 73, 1) 84%, rgba(92, 66, 56, 1) 99%)"
  },
  {
    "type": "color",
    "id": "text_color",
    "label": "Couleur de Texte",
    "default": "#000"
  },
  {
    "type": "color",
    "id": "btn_text_color",
    "label": "Couleur de Texte du bouton",
    "default": "#fff"
  },
  {
    "type": "color",
    "id": "btn_bg_color",
    "label": "Couleur de fond du bouton",
    "default": "#000"
  },
  {
    "type": "number",
    "id": "percentage",
    "label": "Pourcentage",
    "default": 97
  },
  {
    "type": "text",
    "id": "title",
    "label": "Titre",
    "default": "Des femmes en Europe"
  },
  {
    "type": "richtext",
    "id": "description",
    "label": "Description",
    "default": "<p>ont directement vu un changement avant et après avoir porté nos gaines. Elles ont partagé leur expérience et ont donné une note de 97% sur : <br><strong>le confort, l'effet gainant et l'élasticité du textile.</strong></p>"
  },
  {
    "type": "text",
    "id": "text_btn",
    "label": "Texte du bouton",
    "default": "TESTER SANS RISQUE"
  },
  {
    "type": "url",
    "id": "url_btn",
    "label": "Lien du bouton"
  }
],
"presets": [
  {
    "name": "Text Number"
  }
]
}
{% endschema %}
