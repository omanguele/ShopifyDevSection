<style>
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 {
      position: relative;
      width: 100%;
      background: {{ section.settings.bg_color_desk }};
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_container {
      width: 100%;
      padding: 50px 32px;
      max-width: 1080px;
      margin: 0 auto;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_title {
      font-weight: 700 !important;
      font-style: italic !important;
      text-align: center;
      display: table;
      margin: 0 auto 10px;
      letter-spacing: .35px;
      padding-top: 10px;
      padding-bottom: 0;
      font-size: 24px;
      line-height: 32px;
      text-transform: uppercase;
      color: {{ section.settings.text_color }};
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtitle {
      padding: 4px 16px 3px !important;
      font-weight: 700 !important;
      font-style: italic !important;
      text-align: center;
      display: table;
      margin: 0 auto 10px;
      letter-spacing: .35px;
      text-transform: uppercase;
      background-color: #fff;
      border-radius: 5px;
      font-size: 14px;
      background: {{ section.settings.bg_color_mob }};
      color: {{ section.settings.text_color }};
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_wrapper {
      display: flex;
      gap: 40px;
      padding-top: 20px;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs {
      display: flex;
      width: 50%;
      flex-direction: column;
      justify-content: flex-start;
      margin-top: -25px;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_image {
      width: 50%;
      display: flex;
      align-items: stretch;
      align-content: stretch;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_image_item,
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_mobile_image_item {
      position: relative;
      width: 100%;
      display: none;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_image_item.active {
      display: block;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_mobile_image_item img,
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_image_item img {
      width: 100%;
      max-width: 100%;
      display: block;
      object-position: center;
      object-fit: cover;
      height: auto;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_header {
      margin: 0;
      justify-content: start;
      height: 38px;
      gap: 10px;
      display: flex;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_header_item.active {
      box-shadow: 0 5px 3px #00000035;
      background: #fff;
      height: auto;
      z-index: 0;
      border-color: {{ section.settings.inactive_color }};
      color: {{ section.settings.text_color }};
      margin: 0;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_header_item {
      cursor: pointer;
      position: relative;
      display: flex;
      transition: .3s ease;
      width: 100%;
      text-align: center;
      justify-content: center;
      max-width: 50%;
      background: {{ section.settings.inactive_color }};
      padding: 8px 20px;
      border: 0;
      box-shadow: none;
      border-radius: 10px 10px 0 0;
      font-weight: 700;
      margin-bottom: 4px;
      font-size: 14px !important;
      text-align: center;
      color: {{ section.settings.text_color }}40;
      font-weight: 700;
      letter-spacing: .66px;
      text-transform: uppercase;
  }

  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_body {
      min-height: auto !important;
      height: auto;
      background: {{ section.settings.tab_color }};
      border-radius: 0 0 5px 5px !important;
      box-shadow: 0 2px 2px #00000040;
      padding: 30px 40px;
      top: 0;
      overflow: hidden;
      transition: all 1s ease;
      position: relative;
      opacity: 1;
      margin-top: 0;
      z-index: 0;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_body_item {
      display: none;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_body_item.active {
      display: block;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_body_text {
      position: relative;
      margin: 0;
      padding: 0;
      transition: all 1s ease;
      animation: fadeEffect .6s ease;
      width: 100%;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_body_text p {
      font-size: 14px !important;
      line-height: 24px;
      color: {{ section.settings.text_color }};
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs {
      margin-top: 25px;
      width: 100%;
      position: relative;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item {
      padding: 8px 15px 4px 25px;
      box-shadow: 0 2px 2px #00000040;
      background: {{ section.settings.subtab_color }};
      margin-bottom: 15px;
      border-bottom: 1px solid rgba(0,0,0,.1);
      border-radius: 5px !important;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item.active > .tabsimagetext8523218321_subtabs_item_head .tabsimagetext8523218321_icon  {
      transform:  rotate(90deg);
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item_head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      color: {{ section.settings.text_color }};
      font-size: 14px !important;
      letter-spacing: normal;
      font-weight: 700;
      text-align: left;
      line-height: 24px;
      cursor: pointer;
      padding: 12px 0 14px 0;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item_head svg {
      width: 100%;
      height: 100%;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_icon {
      transition: all .32s cubic-bezier(.33,1,.68,1);
      border-radius: .125rem;
      background-color: {{ section.settings.arrow_color }};
      width: 25px;
      height: 25px;
      padding: 4px;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item.active > .tabsimagetext8523218321_subtabs_item_body {
      display: block;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item_body {
      display: none;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item_body_inner {
      padding-bottom: 16px;
      line-height: 24px;
      font-size: 14px;
      color: {{ section.settings.text_color }};
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item_body_inner_text {
      padding-right: 30px;
      font-size: 14px !important;
      letter-spacing: 0;
      transition: all 1s ease;
      animation: fadeEffect .6s ease;
      width: 100%;
      font-weight: 400;
      text-align: left;
      line-height: 24px;
      font-style: normal;
      color: {{ section.settings.text_color }};
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item_body_inner ul {
      margin: 0;
      max-height: 100%;
      overflow: auto;
      padding: 15px 35px 0 0;
      list-style: none;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item_body_inner ul li {
      list-style: none;
      margin-bottom: 20px;
      position: relative;
      padding-left: 40px;
      font-size: 14px;
      padding-top: 3px;
      letter-spacing: 0;
      margin-top: 0;
      line-height: 24px;
      color: {{ section.settings.text_color }};
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item_body_inner ul li .icon {
      padding: 2px;
      border: 1px solid {{ section.settings.text_color }};
      color: {{ section.settings.text_color }};
      position: absolute;
      left: 0;
      top: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 25px;
      width: 25px;
  }
  #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item_body_inner ul li .icon svg {
      height: 100%;
      width: 100%;
  }
  @media screen and (max-width: 1023px) {
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_container {
          padding: 40px 16px;
      }
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs {
          width: 100%;
          margin-top: -20px;
      }
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_mobile_image_item {
          display: block;
          margin: 20px 0 25px 0;
      }
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_image {
          display: none;
      }
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 {
       background-color: {{ section.settings.bg_color_mob }};
      }
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item {
          background-color: { section.settings.tab_color }};
      }
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtitle {
          background-color: {{ section.settings.bg_color_desk }};
      }
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_header_item {
          border-radius: 16px 16px 0 0;
      }
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_header_item.active,
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_body {
          background-color: { section.settings.subtab_color }};
      }
      #shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_body {
          padding: 0 20px;
      }
  }
  @keyframes fadeEffect {
      0% {
          opacity: 0;
          margin-left: 30px;
      }
      100% {
          opacity: 1;
          margin-left: 0;
      }
  }
</style>

<section id="tabsimagetext8523218321">
  <div class="tabsimagetext8523218321_container">
    <h2 class="tabsimagetext8523218321_title">{{ section.settings.heading }}</h2>
    <span class="tabsimagetext8523218321_subtitle">{{ section.settings.description }}</span>
    <div class="tabsimagetext8523218321_wrapper">
      <div class="tabsimagetext8523218321_tabs">
        <div class="tabsimagetext8523218321_tabs_header">
          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when 'tab' -%}
                <div class="tabsimagetext8523218321_tabs_header_item {% if forloop.index == 1 %} active {% endif %}">
                  {{ block.settings.tab_label }}
                </div>
            {% endcase %}
          {% endfor %}
        </div>
        <div class="tabsimagetext8523218321_tabs_body">
          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when 'tab' -%}
                <div class="tabsimagetext8523218321_tabs_body_item {% if forloop.index == 1 %} active {% endif %}">
                  <div class="tabsimagetext8523218321_mobile_image_item">
                    <img
                      src="{{ block.settings.image | img_url: "master" }}"
                      alt=""
                    >
                  </div>
                  <div class="tabsimagetext8523218321_tabs_body_text">
                    {{ block.settings.text }}
                  </div>
                  <div class="tabsimagetext8523218321_subtabs">
                    {%- for subblock in section.blocks -%}
                      {% if subblock.type == 'subtab' %}
                        {% assign subblocktab_label = subblock.settings.tab_label | downcase %}
                        {% assign blocktab_label = block.settings.tab_label | downcase %}
                        {% if subblocktab_label == blocktab_label %}
                          <div class="tabsimagetext8523218321_subtabs_item">
                            <div class="tabsimagetext8523218321_subtabs_item_head">
                              <span>{{ subblock.settings.label }}</span>
                              <span class="tabsimagetext8523218321_icon">
                                <svg
                                  xmlns="http://www.w3.org/2000/svg"
                                  fill="none"
                                  viewBox="0 0 24 24"
                                  stroke-width="1.5"
                                  stroke="currentColor"
                                >
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                                </svg>
                              </span>
                            </div>

                            <div class="tabsimagetext8523218321_subtabs_item_body">
                              <div class="tabsimagetext8523218321_subtabs_item_body_inner">
                                <p class="tabsimagetext8523218321_subtabs_item_body_inner_text">
                                  {{ subblock.settings.text }}
                                </p>
                                {% assign items = subblock.settings.list_item | split: ',' %}
                                <ul>
                                  {% for item in items %}
                                    <li>
                                      <span class="icon">
                                        <svg
                                          xmlns="http://www.w3.org/2000/svg"
                                          fill="none"
                                          viewBox="0 0 24 24"
                                          stroke-width="1.5"
                                          stroke="currentColor"
                                          class="w-6 h-6"
                                        >
                                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                                        </svg>
                                      </span>
                                      {{ item }}
                                    </li>
                                  {% endfor %}
                                </ul>
                              </div>
                            </div>
                          </div>
                        {% endif %}
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
            {% endcase %}
          {% endfor %}
        </div>
      </div>
      <div class="tabsimagetext8523218321_image">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'tab' -%}
              <div class="tabsimagetext8523218321_image_item {% if forloop.index == 1 %} active {% endif %}">
                <img
                  src="{{ block.settings.image | img_url: "master" }}"
                  alt=""
                >
              </div>
          {% endcase %}
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<script>
  const tabsHeaders = Array.from(document.querySelectorAll('#shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_header_item'));
  const tabsBodies = Array.from(document.querySelectorAll('#shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_tabs_body_item'));
  const tabsImages = Array.from(document.querySelectorAll('#shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_image_item'));
  const subTabs = Array.from(document.querySelectorAll('#shopify-section-{{ section.id }} #tabsimagetext8523218321 .tabsimagetext8523218321_subtabs_item'));

  tabsHeaders.map((tabHeader, i) => {
      tabHeader.addEventListener('click', function(e) {
          setActiveTabs(i);
      });
  });

  subTabs.map((subTab, i) => {
      subTab.querySelector('.tabsimagetext8523218321_subtabs_item_head').addEventListener('click', function(e) {
          subTab.classList.toggle('active');
      });
  });

  function setActiveTabs(i) {
      tabsHeaders.map((tabHeader, y) => {
          if(i === y){
              tabsHeaders[y].classList.add('active');
              tabsBodies[y].classList.add('active');
              tabsImages[y].classList.add('active');
          }else{
              tabsHeaders[y].classList.remove('active');
              tabsBodies[y].classList.remove('active');
              tabsImages[y].classList.remove('active');
              disabledSubTabs(y);
          }
      });
  }

  function disabledSubTabs(i) {
      Array.from(tabsBodies[i].querySelectorAll('.tabsimagetext8523218321_subtabs_item')).map((subTab, y) => {
          subTab.classList.remove('active');
      });
  }
</script>

{% schema %}
{
  "name": "Image Tabs",
  "blocks": [
    {
    "type": "tab",
    "name": "Tab",
      "limit": 2,
    "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "text",
        "id": "tab_label",
        "label": "Tab Label"
      },
      {
        "type": "richtext",
        "id": "text",
        "label": "Text"
      }
    ]
  },
    {
    "type": "subtab",
    "name": "Sub Tab",
    "settings": [
      {
        "type": "text",
        "id": "tab_label",
        "label": "Tab Label"
      },
      {
        "type": "text",
        "id": "label",
        "label": "Label"
      },
      {
        "type": "richtext",
        "id": "text",
        "label": "Text"
      },
      {
        "type": "textarea",
        "id": "list_item",
        "label": "List Item",
        "info": "Separer chaque l'element par une virgule"
      }
    ]
  }
  ],
  "settings": [
    {
      "type": "color",
      "id": "bg_color_desk",
      "label": "Couleur du fond Desk",
      "default": "#fcf2f2"
    },
    {
      "type": "color",
      "id": "bg_color_mob",
      "label": "Couleur du fond Mob",
      "default": "#fff"
    },
    {
      "type": "color",
      "id": "tab_color",
      "label": "Tab Couleur",
      "default": "#fff"
    },
    {
      "type": "color",
      "id": "subtab_color",
      "label": "SubTab Couleur",
      "default": "#fff"
    },
    {
      "type": "color",
      "id": "arrow_color",
      "label": "Arrow Couleur",
      "default": "#fff"
    },
    {
      "type": "color",
      "id": "inactive_color",
      "label": "Inactive Couleur",
      "default": "#fafafa"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Couleur",
      "default": "#000"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description"
    }
  ],
  "presets": [
    {
      "name": "Image Tabs"
    }
  ]
}
{% endschema %}
