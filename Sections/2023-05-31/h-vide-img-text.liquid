<style>
   #shopify-section-{{section.id}} #htvs {
       width: 100%;
       height: auto;
       background-color: {{ section.settings.bg_color }};
   }
   #shopify-section-{{section.id}} #htvs .htvs_container {
       width: 100%;
       display: flex;
       align-items: stretch;
       justify-content: center;
       flex-direction: {{ section.settings.desktop_video_position }};
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .left,
   #shopify-section-{{section.id}} #htvs .htvs_container .right {
       width: 50%;
       background-color: {{ section.settings.bg_color }};
       position: relative;
       display: flex;
       justify-content: center;
   }

   #shopify-section-{{section.id}} #htvs .htvs_container .right {
       min-height: {{ section.settings.desktop_min_height }}px;
       max-height: {{ section.settings.desktop_max_height }}px;
       overflow: hidden;
   }

   #shopify-section-{{section.id}} #htvs .htvs_container .inner_left {
       background-color: {{ section.settings.card_color }};
       flex-direction: column;
       display: flex;
       align-items: center;
       justify-content: center;
       text-align: center;
       position: absolute;
       top: 50%;
       z-index: 10;
     {% if section.settings.desktop_video_position == 'row-reverse' %}
       transform: translate(-100px, -50%);
     {% else %}
       transform: translate(100px, -50%);
       {% endif %}
       padding: 20px 0px 30px 0px;
       width: 100%;
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .swiper-slide {
       position: relative;
       width: 100%;
   }
  #shopify-section-{{section.id}} #htvs  .slide_btn {
       text-decoration: none;
       display: inline-block;
       line-height: 1;
       padding: 12px 24px;
       text-align: center;
       position: absolute;
       top: 50%;
       left: 50%;
       z-index: 10;
       font-size: 16px;
       transition: all 500ms;
       opacity: 0;
       transform: translate(-50%, 100px);
       border-radius: 3px;
   }
   #shopify-section-{{section.id}} #htvs   .slide_btn.show {
       transform: translate(-50%, -50%);
       opacity: 1;
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .right video {
       height: 100%;
       width: 100%;
       display: flex;
       border: none;
       background-color: #000;
       object-fit: cover;
       max-width: 100%;
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .heading_1 {
       font-size: 19px;
       font-weight: 500;
       letter-spacing: 3px;
       color: {{ section.settings.subtitle_color }};
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .heading_2 {
       margin-top: 15px;
       font-family: var(--heading-font-family);
       color: {{ section.settings.title_color }};
       margin-bottom: 20px;
       font-size: 30px;
       font-weight: 600;
       line-height: 37px;
       letter-spacing: 3px;
       max-width: 600px;
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .description {
       font-size: 18px;
       font-weight: 500;
       text-align: center;
       color: {{ section.settings.description_color }};
   }
   #shopify-section-{{section.id}} #htvs .htvs_container  .action_btn {
     margin-top: 20px;
       text-decoration: none;
       display: inline-block;
       line-height: 1;
       padding: 12px 24px;
       text-align: center;
       background-image: {{ section.settings.btn_bg_color }} !important;
       border: 1px solid {{ section.settings.btn_border_color }};
       color: {{ section.settings.btn_text_color }} !important;
       font-size: 22px;
       font-weight: 500;
       text-shadow: 0px 0px 0px rgba(0,0,0,0.3);
       fill: #FFFFFF;
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .swiper {
       width: 100%;
       height: 100%;
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .swiper-slide img {
       display: block;
       width: 100%;
       height: 100%;
       max-width: 100%;
       object-fit: cover;
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .swiper-pagination-bullet-active {
       background-color: {{ section.settings.dot_active }} !important;
   }
   #shopify-section-{{section.id}} #htvs .htvs_container .swiper-pagination-bullet {
       background-color: {{ section.settings.dot_unactive }};
       opacity: 1 !important;
   }

   @media only screen and (max-width: 780px) {
       #shopify-section-{{section.id}} #htvs .htvs_container .left,
       #shopify-section-{{section.id}} #htvs .htvs_container .right {
           width: 100%;
       }
       #shopify-section-{{section.id}} #htvs .htvs_container .right {
           min-height: {{ section.settings.mobile_min_height }}px;
           max-height: {{ section.settings.mobile_max_height }}px;
           overflow: hidden;
       }
       #shopify-section-{{section.id}} #htvs .htvs_container {
           align-items: center;
          flex-direction: {{ section.settings.mobile_video_position }};
       }
       #shopify-section-{{section.id}} #htvs .htvs_container .inner_left {
           width: 85%;
           position: relative;
           top: unset;
           transform: translate(0);
           {% if section.settings.mobile_video_position == 'column-reverse' %}
           margin-top: -50px;
           {% else %}
           margin-bottom: -50px;
           {% endif %}
       }
       #shopify-section-{{section.id}} #htvs .htvs_container  .action_btn {
           font-size: 14px;
       }
       #shopify-section-{{section.id}} #htvs .htvs_container .description {
           font-size: 12px !important;
          width: 90%;
          margin: auto;
       }
       #shopify-section-{{section.id}} #htvs .htvs_container .heading_1 {
           font-size: 14px;
       }
       #shopify-section-{{section.id}} #htvs .htvs_container .heading_2 {
           font-size: 18px;
           line-height: 1;
       }
   }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">

<section id="htvs">
  <div class="htvs_container">
    <div class="left">
      <div class="inner_left">
        <p class="heading_1">{{ section.settings.subtitle }}</p>
        <h2 class="heading_2">{{ section.settings.title }}</h2>
        <p class="description">{{ section.settings.description }}</p>
        {% if section.settings.btn_lib != blank %}
          <a href="{{ section.settings.btn_url }}" class="action_btn">{{ section.settings.btn_lib }}</a>
        {% endif %}
      </div>
    </div>
    <div class="right">
      {% if section.settings.video != blank %}
        <video
          src="{{ section.settings.video.sources[1].url  }} "
          autoplay=""
          loop=""
          muted="muted"
          playsinline=""
          controlslist="nodownload"
        ></video>
      {% else %}
        <div class="swiper mySwiper">
          <div class="swiper-wrapper">
            {% for block in section.blocks %}
              <div class="swiper-slide">
                {% if block.settings.btn_lib != blank %}
                  <a
                    href="{{ block.settings.btn_url }}"
                    class="slide_btn"
                    style="background: {{ block.settings.btn_bg_color }};border: 1px solid {{ block.settings.btn_border_color }}; color: {{ block.settings.btn_text_color }};"
                  >
                    {{ block.settings.btn_lib }}
                  </a>
                {% endif %}
                <img src="{{ block.settings.image | img_url: "master" }}" alt="">
              </div>
            {% endfor %}
          </div>
          <div class="swiper-pagination"></div>
        </div>
      {% endif %}
    </div>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>

<script>
  var swiper = new Swiper(".mySwiper", {
        spaceBetween: 30,
        centeredSlides: true,
        loop: true,
        autoplay: {
        delay: 2500,
        disableOnInteraction: false
        },
        pagination: {
        el: ".swiper-pagination",
        clickable: true
        },
        on: {
            slideChange(s) {
                setTimeout(() => {
                    s.slides[s.activeIndex].querySelector(".slide_btn")?.classList.add("show");
                }, 100);
                if(s.activeIndex == 0){
                    s.slides[s.slides.length - 1].querySelector(".slide_btn")?.classList.remove("show");
                }else{
                    s.slides[s.activeIndex - 1].querySelector(".slide_btn")?.classList.remove("show");
                }
            }
      }
    });
</script>

{% schema %}
{
  "name": "H video Img Txt",
  "blocks": [
      {
        "type": "image",
        "name": "image",
        "settings": [
          {
            "type":"color_background",
            "id":"btn_bg_color",
            "label":"Couleur fond bouton",
            "default":"transparent"
          },
          {
            "type":"color",
            "id":"btn_text_color",
            "label":"Couleur texte bouton",
            "default":"#fff"
          },
          {
            "type":"color",
            "id":"btn_border_color",
            "label":"Couleur bordure bouton",
            "default":"#fff"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "text",
            "id": "btn_lib",
            "label": "Libelle Bouton",
            "default":"Découvrir"
          },
          {
            "type": "url",
            "id": "btn_url",
            "label": "Lien bouton"
          }
        ]
      }
    ],
  "settings": [
    {
      "type":"color",
      "id":"bg_color",
      "label":"Couleur de fond",
      "default":"#fff"
    },
    {
      "type":"color",
      "id":"card_color",
      "label":"Couleur de Card",
      "default":"#f5f5f5"
    },
    {
      "type":"color",
      "id":"subtitle_color",
      "label":"Couleur de Sous titre",
      "default":"#000"
    },
    {
      "type":"color",
      "id":"title_color",
      "label":"Couleur de titre",
      "default":"#000"
    },
    {
      "type":"color",
      "id":"description_color",
      "label":"Couleur de description",
      "default":"#000"
    },
    {
      "type":"color_background",
      "id":"btn_bg_color",
      "label":"Couleur fond bouton",
      "default":"linear-gradient(100deg, #FFF491 20%, #CC9E33 80%)"
    },
    {
      "type":"color",
      "id":"btn_text_color",
      "label":"Couleur texte bouton",
      "default":"#000"
    },
    {
      "type":"color",
      "id":"btn_border_color",
      "label":"Couleur bordure bouton",
      "default":"#fff"
    },
    {
      "type":"color",
      "id":"dot_active",
      "label":"Couleur dot actif",
      "default":"#000"
    },
    {
      "type":"color",
      "id":"dot_unactive",
      "label":"Couleur dot inactif",
      "default":"#fff"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Sous Titre",
      "default":"Lorem ipsum"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titre",
      "default":"Lorem ipsum"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default":"Lorem ipsum...."
    },
    {
      "type": "text",
      "id": "btn_lib",
      "label": "Libelle Bouton",
      "default":"Découvrir"
    },
    {
      "type": "url",
      "id": "btn_url",
      "label": "Lien bouton"
    },
    {
      "type": "video",
      "id": "video",
      "label": "Video"
    },
    {
      "type": "select",
      "id": "desktop_video_position",
      "label": "Desktop Video Position",
      "options": [
        {
          "value": "row",
          "label": "Gauche"
        },
        {
          "value": "row-reverse",
          "label": "Droite"
        }
      ],
      "default": "row"
    },
    {
      "type": "select",
      "id": "mobile_video_position",
      "label": "Mobile Video Position",
      "options": [
        {
          "value": "column",
          "label": "Reverse"
        },
        {
          "value": "column-reverse",
          "label": "Normal"
        }
      ],
      "default": "column-reverse"
    },
    {
      "type": "number",
      "id": "desktop_min_height",
      "label": "Hauteur min video (desktop)",
      "default": 500
    },
    {
      "type": "number",
      "id": "desktop_max_height",
      "label": "Hauteur max video (desktop)",
      "default": 500
    },
    {
      "type": "number",
      "id": "mobile_min_height",
      "label": "Hauteur min video (mobile)",
      "default": 200
    },
    {
      "type": "number",
      "id": "mobile_max_height",
      "label": "Hauteur max video (mobile)",
      "default": 300
    }
  ],
"presets": [
  {
    "name": "H video Img Txt"
  }
]
}
{% endschema %}
